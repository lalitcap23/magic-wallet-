<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic Wallet SDK - One-Click PDF Export Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 30px;
        }

        .wallet-info {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .wallet-info h3 {
            margin-top: 0;
            color: #2d3748;
        }

        .address {
            font-family: monospace;
            background: #edf2f7;
            padding: 8px;
            border-radius: 4px;
            word-break: break-all;
        }

        .button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .button:disabled {
            background: #a0aec0;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .button.secondary {
            background: #48bb78;
        }

        .button.danger {
            background: #f56565;
        }

        .log {
            background: #1a202c;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
        }

        .status {
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
        }

        .status.success {
            background: #f0fff4;
            border: 1px solid #68d391;
            color: #22543d;
        }

        .status.error {
            background: #fed7d7;
            border: 1px solid #fc8181;
            color: #742a2a;
        }

        .status.info {
            background: #ebf8ff;
            border: 1px solid #63b3ed;
            color: #2c5282;
        }

        .qr-code {
            text-align: center;
            margin: 20px 0;
        }

        .qr-code img {
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 10px;
            background: white;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-card {
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }

        .feature-card h4 {
            margin-top: 0;
            color: #4a5568;
        }

        .mnemonic {
            background: #fef5e7;
            border: 1px solid #f6ad55;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .mnemonic-words {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-top: 10px;
        }

        .mnemonic-word {
            background: white;
            padding: 8px;
            border-radius: 4px;
            text-align: center;
            font-family: monospace;
            font-size: 14px;
            border: 1px solid #ed8936;
        }

        .warning {
            background: #fffbf0;
            border: 1px solid #f6ad55;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .warning h4 {
            margin-top: 0;
            color: #c05621;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ü™Ñ Magic Wallet SDK - One-Click PDF Export Demo</h1>

        <div class="status info">
            <strong>‚ÑπÔ∏è About this demo:</strong> This showcases the Magic Wallet SDK's one-click PDF export feature.
            Create a temporary wallet, auto-fund it, and export a secure PDF backup with QR codes!
        </div>

        <div class="feature-grid">
            <div class="feature-card">
                <h4>üì± Create Wallet</h4>
                <button id="createWallet" class="button">Create Temporary Wallet</button>
            </div>

            <div class="feature-card">
                <h4>üí∞ Fund Wallet</h4>
                <button id="fundWallet" class="button secondary" disabled>Auto-Fund from Faucet</button>
            </div>

            <div class="feature-card">
                <h4>üìÑ Export PDF</h4>
                <button id="exportPDF" class="button" disabled>Download PDF Backup</button>
            </div>

            <div class="feature-card">
                <h4>üì± Generate QR</h4>
                <button id="generateQR" class="button secondary" disabled>Show QR Code</button>
            </div>
        </div>

        <div id="walletInfo" class="wallet-info" style="display: none;">
            <h3>üì± Wallet Information</h3>
            <p><strong>Address:</strong> <span id="walletAddress" class="address"></span></p>
            <p><strong>Balance:</strong> <span id="walletBalance">Loading...</span> STX</p>

            <div class="warning">
                <h4>‚ö†Ô∏è Security Warning</h4>
                <p>This is a demo wallet. Never use real funds with temporary wallets in production!</p>
            </div>

            <div id="mnemonicDisplay" class="mnemonic" style="display: none;">
                <h4>üîë Seed Phrase (Mnemonic)</h4>
                <p>Keep this secure! This is your wallet backup.</p>
                <div id="mnemonicWords" class="mnemonic-words"></div>
            </div>
        </div>

        <div id="qrDisplay" class="qr-code" style="display: none;">
            <h3>üì± Wallet QR Code</h3>
            <p>Scan this QR code to import your wallet on mobile devices</p>
            <div id="qrCodeContainer"></div>
        </div>

        <div id="log" class="log">
            <div>üîÑ Ready to create wallet...</div>
        </div>

        <div class="status info">
            <strong>üí° How it works:</strong>
            <ol>
                <li><strong>Create:</strong> Generate a new temporary wallet with mnemonic phrase</li>
                <li><strong>Fund:</strong> Automatically fund from Stacks testnet faucet</li>
                <li><strong>Export:</strong> Download a secure PDF backup with QR codes</li>
                <li><strong>Import:</strong> Use the PDF or QR code to import into any Stacks wallet</li>
            </ol>
        </div>
    </div>

    <script type="module">
        // For demo purposes, we'll simulate the Magic Wallet SDK
        // In production, you would import from your built SDK

        let currentWallet = null;
        let magicWallet = null;

        function log(message, type = 'info') {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            const emoji = type === 'error' ? '‚ùå' : type === 'success' ? '‚úÖ' : '‚ÑπÔ∏è';
            logDiv.innerHTML += `<div>[${timestamp}] ${emoji} ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function updateUI() {
            const hasWallet = !!currentWallet;
            document.getElementById('fundWallet').disabled = !hasWallet;
            document.getElementById('exportPDF').disabled = !hasWallet;
            document.getElementById('generateQR').disabled = !hasWallet;

            if (hasWallet) {
                document.getElementById('walletInfo').style.display = 'block';
                document.getElementById('walletAddress').textContent = currentWallet.address;

                // Display mnemonic words
                const mnemonicWords = currentWallet.mnemonic.split(' ');
                const wordsContainer = document.getElementById('mnemonicWords');
                wordsContainer.innerHTML = '';
                mnemonicWords.forEach((word, index) => {
                    const wordDiv = document.createElement('div');
                    wordDiv.className = 'mnemonic-word';
                    wordDiv.textContent = `${index + 1}. ${word}`;
                    wordsContainer.appendChild(wordDiv);
                });
                document.getElementById('mnemonicDisplay').style.display = 'block';
            }
        }

        // Simulate wallet creation
        document.getElementById('createWallet').addEventListener('click', async () => {
            try {
                log('Creating temporary wallet...');

                // Simulate wallet creation (in real app, this would use the SDK)
                await new Promise(resolve => setTimeout(resolve, 1000));

                currentWallet = {
                    address: 'ST' + Math.random().toString(36).substring(2, 30).toUpperCase(),
                    mnemonic: 'abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about',
                    privateKey: '0x' + Math.random().toString(16).substring(2, 66),
                    balance: 0
                };

                log('‚úÖ Temporary wallet created successfully!', 'success');
                log(`Address: ${currentWallet.address}`);
                updateUI();

            } catch (error) {
                log(`Wallet creation failed: ${error.message}`, 'error');
            }
        });

        // Simulate funding
        document.getElementById('fundWallet').addEventListener('click', async () => {
            try {
                log('Requesting funds from testnet faucet...');

                // Simulate faucet request
                await new Promise(resolve => setTimeout(resolve, 2000));

                currentWallet.balance = 1000 + Math.floor(Math.random() * 1000);
                document.getElementById('walletBalance').textContent = currentWallet.balance;

                log('‚úÖ Wallet funded successfully!', 'success');
                log(`Received ${currentWallet.balance} STX from faucet`);

            } catch (error) {
                log(`Funding failed: ${error.message}`, 'error');
            }
        });

        // PDF Export (simulated)
        document.getElementById('exportPDF').addEventListener('click', async () => {
            try {
                log('Generating PDF backup...');

                // Simulate PDF generation
                await new Promise(resolve => setTimeout(resolve, 1500));

                // Create a simple text file as demo (real SDK would create PDF)
                const content = `MAGIC WALLET BACKUP
===================

‚ö†Ô∏è KEEP THIS SECURE ‚ö†Ô∏è

Address: ${currentWallet.address}
Network: Testnet
Created: ${new Date().toLocaleString()}

Seed Phrase (Mnemonic):
${currentWallet.mnemonic}

Private Key:
${currentWallet.privateKey}

Balance: ${currentWallet.balance} STX

SECURITY WARNINGS:
- Never share your private key or seed phrase
- Store this backup in a secure location
- Anyone with this information can control your wallet

Instructions for importing:
1. Open Hiro Wallet, Xverse, or Leather wallet
2. Choose "Import Wallet" or "Restore Wallet"
3. Enter your 12-word seed phrase
4. Your wallet will be restored with all funds
`;

                // Download as text file for demo
                const blob = new Blob([content], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `magic-wallet-backup-${currentWallet.address.slice(0, 8)}.txt`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);

                log('‚úÖ PDF backup downloaded successfully!', 'success');
                log('üí° In production, this would be a proper PDF with QR codes');

            } catch (error) {
                log(`PDF export failed: ${error.message}`, 'error');
            }
        });

        // QR Code generation (simulated)
        document.getElementById('generateQR').addEventListener('click', async () => {
            try {
                log('Generating QR code...');

                // Create a simple QR code placeholder
                const qrContainer = document.getElementById('qrCodeContainer');
                qrContainer.innerHTML = `
                    <div style="width: 200px; height: 200px; border: 2px solid #333; margin: 0 auto; display: flex; align-items: center; justify-content: center; font-family: monospace; text-align: center; line-height: 1.2;">
                        QR CODE<br/>
                        (Mnemonic)<br/>
                        üì±<br/>
                        Scan to Import
                    </div>
                    <p style="margin-top: 10px; font-family: monospace; font-size: 12px; word-break: break-all; background: #f0f0f0; padding: 10px; border-radius: 4px;">
                        ${currentWallet.mnemonic}
                    </p>
                `;

                document.getElementById('qrDisplay').style.display = 'block';

                log('‚úÖ QR code generated successfully!', 'success');
                log('üí° In production, this would be a real QR code using the qrcode library');

            } catch (error) {
                log(`QR generation failed: ${error.message}`, 'error');
            }
        });

        log('ü™Ñ Magic Wallet SDK Demo loaded');
        log('Click "Create Temporary Wallet" to begin!');
    </script>
</body>

</html>